/* @license
 * Copyright (c) 2017, Jeff Hlywa (jhlywa@gmail.com)
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */
var Chess=function(r){function e(r){return"undefined"!=typeof r}function n(r){e(r)||(r=!1),lr=new Array(128),sr={w:$,b:$},pr=x,cr={w:0,b:0},vr=$,gr=0,hr=1,Er=[],r||(br={}),u(f())}function t(){o(Z)}function o(r,t){e(t)||(t=!1);var o=r.split(/\s+/),a=o[0],l=0;if(!i(r).valid)return!1;n(t);for(var p=0;p<a.length;p++){var c=a.charAt(p);if("/"===c)l+=8;else if(k(c))l+=parseInt(c,10);else{var v="a">c?x:U;s({type:c.toLowerCase(),color:v},N(l)),l++}}return pr=o[1],o[2].indexOf("K")>-1&&(cr.w|=nr.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(cr.w|=nr.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(cr.b|=nr.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(cr.b|=nr.QSIDE_CASTLE),vr="-"===o[3]?$:ar[o[3]],gr=parseInt(o[4],10),hr=parseInt(o[5],10),u(f()),!0}function i(r){var e={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},n=r.split(/\s+/);if(6!==n.length)return{valid:!1,error_number:1,error:e[1]};if(isNaN(n[5])||parseInt(n[5],10)<=0)return{valid:!1,error_number:2,error:e[2]};if(isNaN(n[4])||parseInt(n[4],10)<0)return{valid:!1,error_number:3,error:e[3]};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{valid:!1,error_number:4,error:e[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{valid:!1,error_number:5,error:e[5]};if(!/^(w|b)$/.test(n[1]))return{valid:!1,error_number:6,error:e[6]};var t=n[0].split("/");if(8!==t.length)return{valid:!1,error_number:7,error:e[7]};for(var o=0;o<t.length;o++){for(var i=0,f=!1,a=0;a<t[o].length;a++)if(isNaN(t[o][a])){if(!/^[prnbqkPRNBQK]$/.test(t[o][a]))return{valid:!1,error_number:9,error:e[9]};i+=1,f=!1}else{if(f)return{valid:!1,error_number:8,error:e[8]};i+=parseInt(t[o][a],10),f=!0}if(8!==i)return{valid:!1,error_number:10,error:e[10]}}return"3"==n[3][1]&&"w"==n[1]||"6"==n[3][1]&&"b"==n[1]?{valid:!1,error_number:11,error:e[11]}:{valid:!0,error_number:0,error:e[0]}}function f(){for(var r=0,e="",n=ar.a8;n<=ar.h1;n++){if(null==lr[n])r++;else{r>0&&(e+=r,r=0);var t=lr[n].color,o=lr[n].type;e+=t===x?o.toUpperCase():o.toLowerCase()}n+1&136&&(r>0&&(e+=r),n!==ar.h1&&(e+="/"),r=0,n+=8)}var i="";cr[x]&nr.KSIDE_CASTLE&&(i+="K"),cr[x]&nr.QSIDE_CASTLE&&(i+="Q"),cr[U]&nr.KSIDE_CASTLE&&(i+="k"),cr[U]&nr.QSIDE_CASTLE&&(i+="q"),i=i||"-";var f=vr===$?"-":N(vr);return[e,pr,i,f,gr,hr].join(" ")}function a(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(br[r[e]]=r[e+1]);return br}function u(r){Er.length>0||(r!==Z?(br.SetUp="1",br.FEN=r):(delete br.SetUp,delete br.FEN))}function l(r){var e=lr[ar[r]];return e?{type:e.type,color:e.color}:null}function s(r,e){if(!("type"in r&&"color"in r))return!1;if(-1===H.indexOf(r.type.toLowerCase()))return!1;if(!(e in ar))return!1;var n=ar[e];return r.type==W&&sr[r.color]!=$&&sr[r.color]!=n?!1:(lr[n]={type:r.type,color:r.color},r.type===W&&(sr[r.color]=n),u(f()),!0)}function p(r){var e=l(r);return lr[ar[r]]=null,e&&e.type===W&&(sr[e.color]=$),u(f()),e}function c(r,e,n,t,o){var i={color:pr,from:e,to:n,flags:t,piece:r[e].type};return o&&(i.flags|=nr.PROMOTION,i.promotion=o),r[n]?i.captured=r[n].type:t&nr.EP_CAPTURE&&(i.captured=j),i}function v(r){function n(r,e,n,t,o){if(r[n].type!==j||L(t)!==fr&&L(t)!==tr)e.push(c(r,n,t,o));else for(var i=[F,G,M,B],f=0,a=i.length;a>f;f++)e.push(c(r,n,t,o,i[f]))}var t=[],o=pr,i=O(o),f={b:ir,w:or},a=ar.a8,u=ar.h1,l=!1,s=e(r)&&"legal"in r?r.legal:!0;if(e(r)&&"square"in r){if(!(r.square in ar))return[];a=u=ar[r.square],l=!0}for(var p=a;u>=p;p++)if(136&p)p+=7;else{var v=lr[p];if(null!=v&&v.color===o)if(v.type===j){var g=p+J[o][0];if(null==lr[g]){n(lr,t,p,g,nr.NORMAL);var g=p+J[o][1];f[o]===L(p)&&null==lr[g]&&n(lr,t,p,g,nr.BIG_PAWN)}for(h=2;4>h;h++){var g=p+J[o][h];136&g||(null!=lr[g]&&lr[g].color===i?n(lr,t,p,g,nr.CAPTURE):g===vr&&n(lr,t,p,vr,nr.EP_CAPTURE))}}else for(var h=0,d=V[v.type].length;d>h;h++)for(var _=V[v.type][h],g=p;;){if(g+=_,136&g)break;if(null!=lr[g]){if(lr[g].color===o)break;n(lr,t,p,g,nr.CAPTURE);break}if(n(lr,t,p,g,nr.NORMAL),"n"===v.type||"k"===v.type)break}}if(!l||u===sr[o]){if(cr[o]&nr.KSIDE_CASTLE){var m=sr[o],A=m+2;null!=lr[m+1]||null!=lr[A]||E(i,sr[o])||E(i,m+1)||E(i,A)||n(lr,t,sr[o],A,nr.KSIDE_CASTLE)}if(cr[o]&nr.QSIDE_CASTLE){var m=sr[o],A=m-2;null!=lr[m-1]||null!=lr[m-2]||null!=lr[m-3]||E(i,sr[o])||E(i,m-1)||E(i,A)||n(lr,t,sr[o],A,nr.QSIDE_CASTLE)}}if(!s)return t;for(var S=[],p=0,d=t.length;d>p;p++)C(t[p]),b(o)||S.push(t[p]),T();return S}function g(r,e){var n="";if(r.flags&nr.KSIDE_CASTLE)n="O-O";else if(r.flags&nr.QSIDE_CASTLE)n="O-O-O";else{var t=I(r,e);r.piece!==j&&(n+=r.piece.toUpperCase()+t),r.flags&(nr.CAPTURE|nr.EP_CAPTURE)&&(r.piece===j&&(n+=N(r.from)[0]),n+="x"),n+=N(r.to),r.flags&nr.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return C(r),d()&&(n+=_()?"#":"+"),T(),n}function h(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function E(r,e){for(var n=ar.a8;n<=ar.h1;n++)if(136&n)n+=7;else if(null!=lr[n]&&lr[n].color===r){var t=lr[n],o=n-e,i=o+119;if(X[i]&1<<rr[t.type]){if(t.type===j){if(o>0){if(t.color===x)return!0}else if(t.color===U)return!0;continue}if("n"===t.type||"k"===t.type)return!0;for(var f=Y[i],a=n+f,u=!1;a!==e;){if(null!=lr[a]){u=!0;break}a+=f}if(!u)return!0}}return!1}function b(r){return E(O(r),sr[r])}function d(){return b(pr)}function _(){return d()&&0===v().length}function m(){return!d()&&0===v().length}function A(){for(var r={},e=[],n=0,t=0,o=ar.a8;o<=ar.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var i=lr[o];i&&(r[i.type]=i.type in r?r[i.type]+1:1,i.type===M&&e.push(t),n++)}if(2===n)return!0;if(3===n&&(1===r[M]||1===r[B]))return!0;if(n===r[M]+2){for(var f=0,a=e.length,o=0;a>o;o++)f+=e[o];if(0===f||f===a)return!0}return!1}function S(){for(var r=[],e={},n=!1;;){var t=T();if(!t)break;r.push(t)}for(;;){var o=f().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;C(r.pop())}return n}function y(r){Er.push({move:r,kings:{b:sr.b,w:sr.w},turn:pr,castling:{b:cr.b,w:cr.w},ep_square:vr,half_moves:gr,move_number:hr})}function C(r){var e=pr,n=O(e);if(y(r),lr[r.to]=lr[r.from],lr[r.from]=null,r.flags&nr.EP_CAPTURE&&(pr===U?lr[r.to-16]=null:lr[r.to+16]=null),r.flags&nr.PROMOTION&&(lr[r.to]={type:r.promotion,color:e}),lr[r.to].type===W){if(sr[lr[r.to].color]=r.to,r.flags&nr.KSIDE_CASTLE){var t=r.to-1,o=r.to+1;lr[t]=lr[o],lr[o]=null}else if(r.flags&nr.QSIDE_CASTLE){var t=r.to+1,o=r.to-2;lr[t]=lr[o],lr[o]=null}cr[e]=""}if(cr[e])for(var i=0,f=ur[e].length;f>i;i++)if(r.from===ur[e][i].square&&cr[e]&ur[e][i].flag){cr[e]^=ur[e][i].flag;break}if(cr[n])for(var i=0,f=ur[n].length;f>i;i++)if(r.to===ur[n][i].square&&cr[n]&ur[n][i].flag){cr[n]^=ur[n][i].flag;break}vr=r.flags&nr.BIG_PAWN?"b"===pr?r.to-16:r.to+16:$,r.piece===j?gr=0:r.flags&(nr.CAPTURE|nr.EP_CAPTURE)?gr=0:gr++,pr===U&&hr++,pr=O(pr)}function T(){var r=Er.pop();if(null==r)return null;var e=r.move;sr=r.kings,pr=r.turn,cr=r.castling,vr=r.ep_square,gr=r.half_moves,hr=r.move_number;var n=pr,t=O(pr);if(lr[e.from]=lr[e.to],lr[e.from].type=e.piece,lr[e.to]=null,e.flags&nr.CAPTURE)lr[e.to]={type:e.captured,color:t};else if(e.flags&nr.EP_CAPTURE){var o;o=n===U?e.to-16:e.to+16,lr[o]={type:j,color:t}}if(e.flags&(nr.KSIDE_CASTLE|nr.QSIDE_CASTLE)){var i,f;e.flags&nr.KSIDE_CASTLE?(i=e.to+1,f=e.to-1):e.flags&nr.QSIDE_CASTLE&&(i=e.to-2,f=e.to+1),lr[i]=lr[f],lr[f]=null}return e}function I(r,e){for(var n=v({legal:!e}),t=r.from,o=r.to,i=r.piece,f=0,a=0,u=0,l=0,s=n.length;s>l;l++){var p=n[l].from,c=n[l].to,g=n[l].piece;i===g&&t!==p&&o===c&&(f++,L(t)===L(p)&&a++,R(t)===R(p)&&u++)}return f>0?a>0&&u>0?N(t):N(t).charAt(u>0?1:0):""}function P(){for(var r="   +------------------------+\n",e=ar.a8;e<=ar.h1;e++){if(0===R(e)&&(r+=" "+"87654321"[L(e)]+" |"),null==lr[e])r+=" . ";else{var n=lr[e].type,t=lr[e].color,o=t===x?n.toUpperCase():n.toLowerCase();r+=" "+o+" "}e+1&136&&(r+="|\n",e+=8)}return r+="   +------------------------+\n",r+="     a  b  c  d  e  f  g  h\n"}function w(r,e){var n=h(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],i=t[2],f=t[3],a=t[4]}for(var u=v(),l=0,s=u.length;s>l;l++){if(n===h(g(u[l]))||e&&n===h(g(u[l],!0)))return u[l];if(!(!t||o&&o.toLowerCase()!=u[l].piece||ar[i]!=u[l].from||ar[f]!=u[l].to||a&&a.toLowerCase()!=u[l].promotion))return u[l]}return null}function L(r){return r>>4}function R(r){return 15&r}function N(r){var e=R(r),n=L(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function O(r){return r===x?U:x}function k(r){return-1!=="0123456789".indexOf(r)}function q(r){var e=D(r);e.san=g(e,!1),e.to=N(e.to),e.from=N(e.from);var n="";for(var t in nr)nr[t]&e.flags&&(n+=er[t]);return e.flags=n,e}function D(r){var e=r instanceof Array?[]:{};for(var n in r)"object"==typeof n?e[n]=D(r[n]):e[n]=r[n];return e}function K(r){return r.replace(/^\s+|\s+$/g,"")}function Q(r){for(var e=v({legal:!1}),n=0,t=pr,o=0,i=e.length;i>o;o++){if(C(e[o]),!b(t))if(r-1>0){var f=Q(r-1);n+=f}else n++;T()}return n}var U="b",x="w",$=-1,j="p",B="n",M="b",G="r",F="q",W="k",H="pnbrqkPNBRQK",Z="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",z=["1-0","0-1","1/2-1/2","*"],J={b:[16,32,17,15],w:[-16,-32,-17,-15]},V={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},X=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Y=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],rr={p:0,n:1,b:2,r:3,q:4,k:5},er={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},nr={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},tr=7,or=6,ir=1,fr=0,ar={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ur={w:[{square:ar.a1,flag:nr.QSIDE_CASTLE},{square:ar.h1,flag:nr.KSIDE_CASTLE}],b:[{square:ar.a8,flag:nr.QSIDE_CASTLE},{square:ar.h8,flag:nr.KSIDE_CASTLE}]},lr=new Array(128),sr={w:$,b:$},pr=x,cr={w:0,b:0},vr=$,gr=0,hr=1,Er=[],br={};return o(e(r)?r:Z),{WHITE:x,BLACK:U,PAWN:j,KNIGHT:B,BISHOP:M,ROOK:G,QUEEN:F,KING:W,SQUARES:function(){for(var r=[],e=ar.a8;e<=ar.h1;e++)136&e?e+=7:r.push(N(e));return r}(),FLAGS:er,load:function(r){return o(r)},reset:function(){return t()},moves:function(r){for(var n=v(r),t=[],o=0,i=n.length;i>o;o++)t.push(e(r)&&"verbose"in r&&r.verbose?q(n[o]):g(n[o],!1));return t},in_check:function(){return d()},in_checkmate:function(){return _()},in_stalemate:function(){return m()},in_draw:function(){return gr>=100||m()||A()||S()},insufficient_material:function(){return A()},in_threefold_repetition:function(){return S()},game_over:function(){return gr>=100||_()||m()||A()||S()},validate_fen:function(r){return i(r)},fen:function(){return f()},board:function(){for(var r=[],e=[],n=ar.a8;n<=ar.h1;n++)e.push(null==lr[n]?null:{type:lr[n].type,color:lr[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var n="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",t="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,o=[],i=!1;for(var f in br)o.push("["+f+' "'+br[f]+'"]'+n),i=!0;i&&Er.length&&o.push(n);for(var a=[];Er.length>0;)a.push(T());for(var u=[],l="";a.length>0;){var s=a.pop();Er.length||"b"!==s.color?"w"===s.color&&(l.length&&u.push(l),l=hr+"."):l=hr+". ...",l=l+" "+g(s,!1),C(s)}if(l.length&&u.push(l),e(br.Result)&&u.push(br.Result),0===t)return o.join("")+u.join(" ");for(var p=0,f=0;f<u.length;f++)p+u[f].length>t&&0!==f?(" "===o[o.length-1]&&o.pop(),o.push(n),p=0):0!==f&&(o.push(" "),p++),o.push(u[f]),p+=u[f].length;return o.join("")},load_pgn:function(r,n){function i(r){return r.replace(/\\/g,"\\")}function f(r){for(var e in r)return!0;return!1}function u(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",t={},o=r.split(new RegExp(i(n))),f="",a="",u=0;u<o.length;u++)f=o[u].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),a=o[u].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),K(f).length>0&&(t[f]=a);return t}var l=e(n)&&"sloppy"in n?n.sloppy:!1,s="object"==typeof n&&"string"==typeof n.newline_char?n.newline_char:"\r?\n",p=new RegExp("^(\\[(.|"+i(s)+")*\\])("+i(s)+")*1.("+i(s)+"|.)*$","g"),c=r.replace(p,"$1");"["!==c[0]&&(c=""),t();var v=u(c,n);for(var g in v)a([g,v[g]]);if("1"===v.SetUp&&!("FEN"in v&&o(v.FEN,!0)))return!1;var h=r.replace(c,"").replace(new RegExp(i(s),"g")," ");h=h.replace(/(\{[^}]+\})+?/g,"");for(var E=/(\([^\(\)]+\))+?/g;E.test(h);)h=h.replace(E,"");h=h.replace(/\d+\.(\.\.)?/g,""),h=h.replace(/\.\.\./g,""),h=h.replace(/\$\d+/g,"");var b=K(h).split(new RegExp(/\s+/));b=b.join(",").replace(/,,+/g,",").split(",");for(var d="",_=0;_<b.length-1;_++){if(d=w(b[_],l),null==d)return!1;C(d)}if(d=b[b.length-1],z.indexOf(d)>-1)f(br)&&!e(br.Result)&&a(["Result",d]);else{if(d=w(d,l),null==d)return!1;C(d)}return!0},header:function(){return a(arguments)},ascii:function(){return P()},turn:function(){return pr},move:function(r,n){var t=e(n)&&"sloppy"in n?n.sloppy:!1,o=null;if("string"==typeof r)o=w(r,t);else if("object"==typeof r)for(var i=v(),f=0,a=i.length;a>f;f++)if(!(r.from!==N(i[f].from)||r.to!==N(i[f].to)||"promotion"in i[f]&&r.promotion!==i[f].promotion)){o=i[f];break}if(!o)return null;var u=q(o);return C(o),u},undo:function(){var r=T();return r?q(r):null},clear:function(){return n()},put:function(r,e){return s(r,e)},get:function(r){return l(r)},remove:function(r){return p(r)},perft:function(r){return Q(r)},square_color:function(r){if(r in ar){var e=ar[r];return(L(e)+R(e))%2===0?"light":"dark"}return null},history:function(r){for(var n=[],t=[],o=(e(r)&&"verbose"in r&&r.verbose);Er.length>0;)n.push(T());for(;n.length>0;){var i=n.pop();t.push(o?q(i):g(i)),C(i)}return t}}};"undefined"!=typeof exports&&(exports.Chess=Chess),"undefined"!=typeof define&&define(function(){return Chess});
