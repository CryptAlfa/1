/*! Chess.js v0.1.0 | Copyright (c) 2015, Jeff Hlywa (jhlywa@gmail.com) | github.com/jhlywa/chess.js/blob/master/LICENSE */"use strict";var Chess=function(){var a="b",b="w",c=-1,d="p",e="n",f="b",g="r",h="q",i="k",j="pnbrqkPNBRQK",k="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",l=["1-0","0-1","1/2-1/2","*"],m={b:[16,32,17,15],w:[-16,-32,-17,-15]},n={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},o=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],p=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],q={p:0,n:1,b:2,r:3,q:4,k:5},r={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},s={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},t=7,u=6,v=5,w=4,x=3,y=2,z=1,A=0,B={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},C={w:[{square:B.a1,flag:s.QSIDE_CASTLE},{square:B.h1,flag:s.KSIDE_CASTLE}],b:[{square:B.a8,flag:s.QSIDE_CASTLE},{square:B.h8,flag:s.KSIDE_CASTLE}]},D={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large]."};function E(a){this.board=new Array(128),this.kings={w:c,b:c},this.turn=b,this.castling={w:0,b:0},this.epSquare=c,this.halfMoves=0,this.moveNumber=1,this.history=[],this.header={},this.load("undefined"==typeof a?k:a)}E.prototype={clear:function(){this.board=new Array(128),this.kings={w:c,b:c},this.turn=b,this.castling={w:0,b:0},this.epSquare=c,this.halfMoves=0,this.moveNumber=1,this.history=[],this.header={},this.updateSetup(this.generateFen())},reset:function(){this.load(k)},load:function(d){var e=d.split(/\s+/),f=e[0],g=0,h=j+"12345678/";if(!this.validateFen(d).valid)return!1;this.clear();for(var i=0;i<f.length;i++){var k=f.charAt(i);if("/"===k)g+=8;else if(this.isDigit(k))g+=parseInt(k,10);else{var l="a">k?b:a;this.put({type:k.toLowerCase(),color:l},this.algebraic(g)),g++}}return this.turn=e[1],e[2].indexOf("K")>-1&&(this.castling.w|=s.KSIDE_CASTLE),e[2].indexOf("Q")>-1&&(this.castling.w|=s.QSIDE_CASTLE),e[2].indexOf("k")>-1&&(this.castling.b|=s.KSIDE_CASTLE),e[2].indexOf("q")>-1&&(this.castling.b|=s.QSIDE_CASTLE),this.epSquare="-"===e[3]?c:B[e[3]],this.halfMoves=parseInt(e[4],10),this.moveNumber=parseInt(e[5],10),this.updateSetup(this.generateFen()),!0},validateFen:function(a){var b=a.split(/\s+/);if(6!==b.length)return{valid:!1,errorNumber:1,error:D[1]};if(isNaN(b[5])||parseInt(b[5],10)<=0)return{valid:!1,errorNumber:2,error:D[2]};if(isNaN(b[4])||parseInt(b[4],10)<0)return{valid:!1,errorNumber:3,error:D[3]};if(!/^(-|[abcdefgh][36])$/.test(b[3]))return{valid:!1,errorNumber:4,error:D[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(b[2]))return{valid:!1,errorNumber:5,error:D[5]};if(!/^(w|b)$/.test(b[1]))return{valid:!1,errorNumber:6,error:D[6]};var c=b[0].split("/");if(8!==c.length)return{valid:!1,errorNumber:7,error:D[7]};for(var d=0;d<c.length;d++){for(var e=0,f=!1,g=0;g<c[d].length;g++)if(isNaN(c[d][g])){if(!/^[prnbqkPRNBQK]$/.test(c[d][g]))return{valid:!1,errorNumber:9,error:D[9]};e+=1,f=!1}else{if(f)return{valid:!1,errorNumber:8,error:D[8]};e+=parseInt(c[d][g],10),f=!0}if(8!==e)return{valid:!1,errorNumber:10,error:D[10]}}return{valid:!0,errorNumber:0,error:D[0]}},generateFen:function(){for(var d=0,e="",f=B.a8;f<=B.h1;f++){if(null==this.board[f])d++;else{d>0&&(e+=d,d=0);var g=this.board[f].color,h=this.board[f].type;e+=g===b?h.toUpperCase():h.toLowerCase()}f+1&136&&(d>0&&(e+=d),f!==B.h1&&(e+="/"),d=0,f+=8)}var i="";this.castling[b]&s.KSIDE_CASTLE&&(i+="K"),this.castling[b]&s.QSIDE_CASTLE&&(i+="Q"),this.castling[a]&s.KSIDE_CASTLE&&(i+="k"),this.castling[a]&s.QSIDE_CASTLE&&(i+="q"),i=i||"-";var j=this.epSquare===c?"-":this.algebraic(this.epSquare);return[e,this.turn,i,j,this.halfMoves,this.moveNumber].join(" ")},setHeader:function(a){for(var b=0;b<a.length;b+=2)"string"==typeof a[b]&&"string"==typeof a[b+1]&&(this.header[a[b]]=a[b+1]);return this.header},updateSetup:function(a){this.history.length>0||(a!==k?(this.header.SetUp="1",this.header.FEN=a):(delete this.header.SetUp,delete this.header.FEN))},get:function(a){var b=this.board[B[a]];return b?{type:b.type,color:b.color}:null},put:function(a,b){if(!("type"in a&&"color"in a))return!1;if(-1===j.indexOf(a.type.toLowerCase()))return!1;if(!(b in B))return!1;var d=B[b];return a.type===i&&this.kings[a.color]!==c&&this.kings[a.color]!==d?!1:(this.board[d]={type:a.type,color:a.color},a.type===i&&(this.kings[a.color]=d),this.updateSetup(this.generateFen()),!0)},remove:function(a){var b=this.get(a);return this.board[B[a]]=null,b&&b.type===i&&(this.kings[b.color]=c),this.updateSetup(this.generateFen()),b},buildMove:function(a,b,c,e){var f={color:this.turn,from:a,to:b,flags:c,piece:this.board[a].type};return e&&(f.flags|=s.PROMOTION,f.promotion=e),this.board[b]?f.captured=this.board[b].type:c&s.EP_CAPTURE&&(f.captured=d),f},addMove:function(a,b,c,i){if(this.board[b].type!==d||this.rank(c)!==A&&this.rank(c)!==t)a.push(this.buildMove(b,c,i));else for(var j=[h,g,f,e],k=0,l=j.length;l>k;k++)a.push(this.buildMove(b,c,i,j[k]))},generateMoves:function(a){var b=[],c=this.turn,f=this.swapColor(c),g={b:z,w:u},h=B.a8,j=B.h1,k=!1,l="undefined"!=typeof a&&"legal"in a?a.legal:!0;if("undefined"!=typeof a&&"square"in a){if(!(a.square in B))return[];h=j=B[a.square],k=!0}for(var o=h;j>=o;o++)if(136&o)o+=7;else{var p=this.board[o];if(null!=p&&p.color===c)if(p.type===d){var q=o+m[c][0];if(null==this.board[q]){this.addMove(b,o,q,s.NORMAL);var q=o+m[c][1];g[c]===this.rank(o)&&null==this.board[q]&&this.addMove(b,o,q,s.BIG_PAWN)}for(r=2;4>r;r++){var q=o+m[c][r];136&q||(null!=this.board[q]&&this.board[q].color===f?this.addMove(b,o,q,s.CAPTURE):q===this.epSquare&&this.addMove(b,o,q,s.EP_CAPTURE))}}else for(var r=0,t=n[p.type].length;t>r;r++){var v=n[p.type][r],q=o;while(!0){if(q+=v,136&q)break;if(null!=this.board[q]){if(this.board[q].color===c)break;this.addMove(b,o,q,s.CAPTURE);break}if(this.addMove(b,o,q,s.NORMAL),p.type===e||p.type===i)break}}}if(!k||j===this.kings[c]){if(this.castling[c]&s.KSIDE_CASTLE){var w=this.kings[c],x=w+2;null!=this.board[w+1]||null!=this.board[x]||this.attacked(f,this.kings[c])||this.attacked(f,w+1)||this.attacked(f,x)||this.addMove(b,this.kings[c],x,s.KSIDE_CASTLE)}if(this.castling[c]&s.QSIDE_CASTLE){var w=this.kings[c],x=w-2;null!=this.board[w-1]||null!=this.board[w-2]||null!=this.board[w-3]||this.attacked(f,this.kings[c])||this.attacked(f,w-1)||this.attacked(f,x)||this.addMove(b,this.kings[c],x,s.QSIDE_CASTLE)}}if(!l)return b;for(var y=[],o=0,t=b.length;t>o;o++)this.makeMove(b[o]),this.kingAttacked(c)||y.push(b[o]),this.undoMove();return y},moveToSan:function(a){var b="";if(a.flags&s.KSIDE_CASTLE)b="O-O";else if(a.flags&s.QSIDE_CASTLE)b="O-O-O";else{var c=this.getDisambiguator(a);a.piece!==d&&(b+=a.piece.toUpperCase()+c),a.flags&(s.CAPTURE|s.EP_CAPTURE)&&(a.piece===d&&(b+=this.algebraic(a.from)[0]),b+="x"),b+=this.algebraic(a.to),a.flags&s.PROMOTION&&(b+="="+a.promotion.toUpperCase())}return this.makeMove(a),this.inCheck()&&(b+=this.inCheckmate()?"#":"+"),this.undoMove(),b},moveFromSan:function(a){for(var b=a.replace(/[+#?!=]/,""),c=this.generateMoves(),d=0,e=c.length;e>d;d++)if(b===this.moveToSan(c[d]).replace(/[+#?!=]/,""))return c[d];return null},attacked:function(c,f){for(var g=B.a8;g<=B.h1;g++)if(136&g)g+=7;else if(null!=this.board[g]&&this.board[g].color===c){var h=this.board[g],j=g-f,k=j+119;if(o[k]&1<<q[h.type]){if(h.type===d){if(j>0){if(h.color===b)return!0}else if(h.color===a)return!0;continue}if(h.type===e||h.type===i)return!0;var l=p[k],m=g+l,n=!1;while(m!==f){if(null!=this.board[m]){n=!0;break}m+=l}if(!n)return!0}}return!1},kingAttacked:function(a){return this.attacked(this.swapColor(a),this.kings[a])},inCheck:function(){return this.kingAttacked(this.turn)},inCheckmate:function(){return this.inCheck()&&0===this.generateMoves().length},inStalemate:function(){return!this.inCheck()&&0===this.generateMoves().length},insufficientMaterial:function(){for(var a={},b=[],c=0,d=0,g=B.a8;g<=B.h1;g++)if(d=(d+1)%2,136&g)g+=7;else{var h=this.board[g];h&&(a[h.type]=h.type in a?a[h.type]+1:1,h.type===f&&b.push(d),c++)}if(2===c)return!0;if(3===c&&(1===a[f]||1===a[e]))return!0;if(c===a[f]+2){for(var i=0,j=b.length,g=0;j>g;g++)i+=b[g];if(0===i||i===j)return!0}return!1},inThreefoldRepetition:function(){var a=[],b={},c=!1;while(!0){var d=this.undoMove();if(!d)break;a.push(d)}while(!0){var e=this.generateFen().split(" ").slice(0,4).join(" ");if(b[e]=e in b?b[e]+1:1,b[e]>=3&&(c=!0),!a.length)break;this.makeMove(a.pop())}return c},push:function(a){this.history.push({move:a,kings:{b:this.kings.b,w:this.kings.w},turn:this.turn,castling:{b:this.castling.b,w:this.castling.w},epSquare:this.epSquare,halfMoves:this.halfMoves,moveNumber:this.moveNumber})},makeMove:function(b){var e=this.turn,f=this.swapColor(e);if(this.push(b),this.board[b.to]=this.board[b.from],this.board[b.from]=null,b.flags&s.EP_CAPTURE&&(this.turn===a?this.board[b.to-16]=null:this.board[b.to+16]=null),b.flags&s.PROMOTION&&(this.board[b.to]={type:b.promotion,color:e}),this.board[b.to].type===i){if(this.kings[this.board[b.to].color]=b.to,b.flags&s.KSIDE_CASTLE){var g=b.to-1,h=b.to+1;this.board[g]=this.board[h],this.board[h]=null}else if(b.flags&s.QSIDE_CASTLE){var g=b.to+1,h=b.to-2;this.board[g]=this.board[h],this.board[h]=null}this.castling[e]=""}if(this.castling[e])for(var j=0,k=C[e].length;k>j;j++)if(b.from===C[e][j].square&&this.castling[e]&C[e][j].flag){this.castling[e]^=C[e][j].flag;break}if(this.castling[f])for(var j=0,k=C[f].length;k>j;j++)if(b.to===C[f][j].square&&this.castling[f]&C[f][j].flag){this.castling[f]^=C[f][j].flag;break}b.flags&s.BIG_PAWN?this.turn===a?this.epSquare=b.to-16:this.epSquare=b.to+16:this.epSquare=c,b.piece===d?this.halfMoves=0:b.flags&(s.CAPTURE|s.EP_CAPTURE)?this.halfMoves=0:this.halfMoves++,this.turn===a&&this.moveNumber++,this.turn=this.swapColor(this.turn)},undoMove:function(){var b=this.history.pop();if(null==b)return null;var c=b.move;this.kings=b.kings,this.turn=b.turn,this.castling=b.castling,this.epSquare=b.epSquare,this.halfMoves=b.halfMoves,this.moveNumber=b.moveNumber;var e=this.turn,f=this.swapColor(this.turn);if(this.board[c.from]=this.board[c.to],this.board[c.from].type=c.piece,this.board[c.to]=null,c.flags&s.CAPTURE)this.board[c.to]={type:c.captured,color:f};else if(c.flags&s.EP_CAPTURE){var g;g=e===a?c.to-16:c.to+16,this.board[g]={type:d,color:f}}if(c.flags&(s.KSIDE_CASTLE|s.QSIDE_CASTLE)){var h,i;c.flags&s.KSIDE_CASTLE?(h=c.to+1,i=c.to-1):c.flags&s.QSIDE_CASTLE&&(h=c.to-2,i=c.to+1),this.board[h]=this.board[i],this.board[i]=null}return c},getDisambiguator:function(a){for(var b=this.generateMoves(),c=a.from,d=a.to,e=a.piece,f=0,g=0,h=0,i=0,j=b.length;j>i;i++){var k=b[i].from,l=b[i].to,m=b[i].piece;e===m&&c!==k&&d===l&&(f++,this.rank(c)===this.rank(k)&&g++,this.file(c)===this.file(k)&&h++)}return f>0?g>0&&h>0?this.algebraic(c):this.algebraic(c).charAt(h>0?1:0):""},ascii:function(){for(var a="   +------------------------+\n",c=B.a8;c<=B.h1;c++){if(0===this.file(c)&&(a+=" "+"87654321"[this.rank(c)]+" |"),null==this.board[c])a+=" . ";else{var d=this.board[c].type,e=this.board[c].color,f=e===b?d.toUpperCase():d.toLowerCase();a+=" "+f+" "}c+1&136&&(a+="|\n",c+=8)}return a+="   +------------------------+\n",a+="     a  b  c  d  e  f  g  h\n"},rank:function(a){return a>>4},file:function(a){return 15&a},algebraic:function(a){var b=this.file(a),c=this.rank(a);return"abcdefgh".substring(b,b+1)+"87654321".substring(c,c+1)},swapColor:function(c){return c===b?a:b},isDigit:function(a){return-1!=="0123456789".indexOf(a)},makePretty:function(a){var b=this.clone(a);b.san=this.moveToSan(b),b.to=this.algebraic(b.to),b.from=this.algebraic(b.from);var c="";for(var d in s)s[d]&b.flags&&(c+=r[d]);return b.flags=c,b},moves:function(a){for(var b=this.generateMoves(a),c=[],d=0,e=b.length;e>d;d++)c.push("undefined"!=typeof a&&"verbose"in a&&a.verbose?this.makePretty(b[d]):this.moveToSan(b[d]));return c},pgn:function(a){var b="object"==typeof a&&"string"==typeof a.newlineChar?a.newlineChar:"\n",c="object"==typeof a&&"number"==typeof a.maxWidth?a.maxWidth:0,d=[],e=!1;for(var f in this.header)d.push("["+f+' "'+this.header[f]+'"]'+b),e=!0;e&&this.history.length&&d.push(b);var g=[];while(this.history.length>0)g.push(this.undoMove());var h=[],i="",j=1;while(g.length>0){var k=g.pop();1===j&&"b"===k.color?(i="1. ...",j++):"w"===k.color&&(i.length&&h.push(i),i=j+".",j++),i=i+" "+this.moveToSan(k),this.makeMove(k)}if(i.length&&h.push(i),"undefined"!=typeof this.header.Result&&h.push(this.header.Result),0===c)return d.join("")+h.join(" ");for(var l=0,f=0;f<h.length;f++)l+h[f].length>c&&0!==f?(" "===d[d.length-1]&&d.pop(),d.push(b),l=0):0!==f&&(d.push(" "),l++),d.push(h[f]),l+=h[f].length;return d.join("")},move:function(a){var b=null,c=this.generateMoves();if("string"==typeof a){for(var d=a.replace(/[+#?!=]/,""),e=0,f=c.length;f>e;e++)if(d===this.moveToSan(c[e]).replace(/[+#?!=]/,"")){b=c[e];break}}else if("object"==typeof a)for(var e=0,f=c.length;f>e;e++)if(!(a.from!==this.algebraic(c[e].from)||a.to!==this.algebraic(c[e].to)||"promotion"in c[e]&&a.promotion!==c[e].promotion)){b=c[e];break}if(!b)return null;var g=this.makePretty(b);return this.makeMove(b),g},mask:function(a){return a.replace(/\\/g,"\\")},getMoveObj:function(a){return this.moveFromSan(this.trim(a))},hasKeys:function(a){var b=!1;for(var c in a)b=!0;return b},newlineChar:function(a){return"object"==typeof a&&"string"==typeof a.newlineChar?a.newlineChar:"\r?\n"},parsePgnHeader:function(a,b){for(var c=this.newlineChar(b),d={},e=a.split(new RegExp(this.mask(c))),f="",g="",h=0;h<e.length;h++)f=e[h].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),g=e[h].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),this.trim(f).length>0&&(d[f]=g);return d},loadPgn:function(a,b){var c=this.newlineChar(b),d=new RegExp("^(\\[(.|"+this.mask(c)+")*\\])("+this.mask(c)+")*1.("+this.mask(c)+"|.)*$","g"),e=a.replace(d,"$1");"["!==e[0]&&(e=""),this.reset();var f=this.parsePgnHeader(e,b);for(var g in f)this.setHeader([g,f[g]]);var h=a.replace(e,"").replace(new RegExp(this.mask(c),"g")," ");h=h.replace(/(\{[^}]+\})+?/g,""),h=h.replace(/\d+\./g,"");var i=this.trim(h).split(new RegExp(/\s+/));i=i.join(",").replace(/,,+/g,",").split(",");for(var j="",k=0;k<i.length-1;k++){if(j=this.getMoveObj(i[k]),null==j)return!1;this.makeMove(j)}if(j=i[i.length-1],l.indexOf(j)>-1)this.hasKeys(this.header)&&"undefined"==typeof this.header.Result&&this.setHeader(["Result",j]);else{if(j=this.getMoveObj(j),null==j)return!1;this.makeMove(j)}return!0},clone:function(a){var b=a instanceof Array?[]:{};for(var c in a)"object"==typeof c?b[c]=this.clone(a[c]):b[c]=a[c];return b},perft:function(a){for(var b=this.generateMoves({legal:!1}),c=0,d=this.turn,e=0,f=b.length;f>e;e++){if(this.makeMove(b[e]),!this.kingAttacked(d))if(a-1>0){var g=this.perft(a-1);c+=g}else c++;this.undoMove()}return c},trim:function(a){return a.replace(/^\s+|\s+$/g,"")}};function F(a){this.chess=new E(a)}return F.prototype={WHITE:b,BLACK:a,PAWN:d,KNIGHT:e,BISHOP:f,ROOK:g,QUEEN:h,KING:i,SQUARES:["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],FLAGS:r,load:function(a){this.chess.load(a)},reset:function(){return this.chess.reset()},moves:function(a){return this.chess.moves(a)},inCheck:function(){return this.chess.inCheck()},inCheckmate:function(){return this.chess.inCheckmate()},inStalemate:function(){return this.chess.inStalemate()},inDraw:function(){return this.chess.halfMoves>=100||this.chess.inStalemate()||this.chess.insufficientMaterial()||this.chess.inThreefoldRepetition()},insufficientMaterial:function(){return this.chess.insufficientMaterial()},inThreefoldRepetition:function(){return this.chess.inThreefoldRepetition()},gameOver:function(){return this.chess.halfMoves>=100||this.chess.inCheckmate()||this.chess.inStalemate()||this.chess.insufficientMaterial()||this.chess.inThreefoldRepetition()},validateFen:function(a){return this.chess.validateFen(a)},fen:function(){return this.chess.generateFen()},pgn:function(a){return this.chess.pgn(a)},moveFromSan:function(a){return this.chess.moveFromSan(a)},loadPgn:function(a,b){return this.chess.loadPgn(a,b)},header:function(a){return this.chess.setHeader(a)},ascii:function(){return this.chess.ascii()},turn:function(){return this.chess.turn},move:function(a){return this.chess.move(a)},undo:function(){var a=this.chess.undoMove();return a?this.chess.makePretty(a):null},clear:function(){return this.chess.clear()},put:function(a,b){return this.chess.put(a,b)},get:function(a){return this.chess.get(a)},remove:function(a){return this.chess.remove(a)},perft:function(a){return this.chess.perft(a)},squareColor:function(a){if(a in this.chess.SQUARES){var b=this.chess.SQUARES[a];return(this.chess.rank(b)+this.chess.file(b))%2===0?"light":"dark"}return null},history:function(a){var b=[],c=[],d="undefined"!=typeof a&&"verbose"in a&&a.verbose;while(this.chess.history.length>0)b.push(this.chess.undoMove());while(b.length>0){var e=b.pop();c.push(d?this.chess.makePretty(e):this.chess.moveToSan(e)),this.chess.makeMove(e)}return c}},F}();"undefined"!=typeof module&&(module.exports=Chess);